// @ts-check
const { test, expect } = require('@playwright/test');

test('auth flow on The Longevity Chef login page', async ({ page }) => {
  // Navigate to the login page
  await page.goto('https://thelongevitychef.io/version-test/auth/log_in');

  // Check that the login form is visible
  await expect(page.locator('form')).toBeVisible();

  // Fill in credentials (replace with valid test credentials)
  await page.fill('input[name="email"]', 'testuser@example.com');
  await page.fill('input[name="password"]', 'password123');

  // Click the login button
  await page.click('button:has-text("Log in")');

  // Wait for navigation after login
  await page.waitForLoadState('networkidle');

  // Example: check that user is redirected to dashboard/home
  await expect(page).toHaveURL(/dashboard|home/);

  // Save authentication state for reuse in other tests
  await page.context().storageState({ path: 'auth.json' });
});
